{"version":3,"sources":["Api/ImageApi.js","Util/ImageApiHelper.js","Projects/Project1/ImageCard.jsx","Pages/MainPage/ContentPage/ApiTest.jsx"],"names":["imageApi","axios","create","baseURL","process","timeout","apiImage","id","get","responseType","apiImageSize","blobURL","data","contentType","blob","b64Data","sliceSize","byteCharacters","atob","byteArrays","offset","length","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","push","Blob","type","b64toBlob","Buffer","from","toString","URL","createObjectURL","ImageCard","props","useState","shouldCreate","setShouldCreate","width","height","size","setSize","image","setImage","useEffect","a","res","console","log","bimage","btob","headers","src","alt","className","getSize","then","_","getImage","style","React","memo","ApiTest"],"mappings":"uGAAA,gFAEMA,EAFN,OAEiBC,EAAMC,OAAO,CAC1BC,QAASC,8BACTC,QAAS,MAGAC,EAAW,SAAAC,GAAE,OAAIP,EAASQ,IAAT,oBAA0BD,GAAM,CAC1DE,aAAc,iBAGLC,EAAe,SAAAH,GAAE,OAAIP,EAASQ,IAAT,wBAA8BD,M,iCCXhE,8CAmBA,SAASI,EAAQC,EAAMC,GACnB,IACIC,EArBU,SAACC,GAIf,IAJ+D,IAAvCF,EAAsC,uDAAxB,GAAIG,EAAoB,uDAAR,IAChDC,EAAiBC,KAAKH,GACtBI,EAAa,GAEVC,EAAS,EAAGA,EAASH,EAAeI,OAAQD,GAAUJ,EAAW,CAItE,IAHA,IAAMM,EAAQL,EAAeK,MAAMF,EAAQA,EAASJ,GAE9CO,EAAc,IAAIC,MAAMF,EAAMD,QAC3BI,EAAI,EAAGA,EAAIH,EAAMD,OAAQI,IAC9BF,EAAYE,GAAKH,EAAMI,WAAWD,GAGtC,IAAME,EAAY,IAAIC,WAAWL,GACjCJ,EAAWU,KAAKF,GAGpB,OADa,IAAIG,KAAKX,EAAY,CAAEY,KAAMlB,IAM/BmB,CADEC,EAAOC,KAAKtB,EAAM,UAAUuB,SAAS,UACrBtB,GAC7B,OAAOuB,IAAIC,gBAAgBvB,M,4ICjB/B,SAASwB,EAAUC,GAAQ,IAAD,EACkBC,oBAAS,GAD3B,mBACfC,EADe,KACDC,EADC,OAEEF,mBAAS,CAAEG,MAAM,GAAD,OAAK,EAAL,MAAYC,OAAO,GAAD,OAAK,EAAL,QAFpC,mBAEfC,EAFe,KAETC,EAFS,OAGIN,mBAAS,MAHb,mBAGfO,EAHe,KAGRC,EAHQ,KAuCtB,OAnCAC,qBACI,WAAM,4CACF,4BAAAC,EAAA,+EAEwBxC,YAAa6B,EAAMhC,IAF3C,OAEY4C,EAFZ,OAGQL,EAAQK,EAAIvC,MAHpB,sDAKQwC,QAAQC,IAAR,MALR,+DADE,kEAWF,8BAAAH,EAAA,+EAEwB5C,YAASiC,EAAMhC,IAFvC,OAEY4C,EAFZ,OAGYG,EAASC,YAAKJ,EAAIvC,KAAMuC,EAAIK,QAAQ,iBACxCR,EACI,qBAAKS,IAAKH,EAAQI,IAAI,YAAYC,UAAU,sBALxD,gDAQQP,QAAQC,IAAR,MARR,0DAXE,sBAyBF,OAzBG,WAAD,+BAsBFO,GACKC,MAAK,SAAAC,GAAC,OAvBT,0CAuBaC,MACP,SAAAD,GAAC,OAAIpB,GAAgB,MACtB,WACHA,EAAgB,MAChBI,EAAQ,MACRE,EAAS,SAGjB,CAACT,EAAMhC,KAIP,mCACKkC,GACG,qBAAKuB,MAAOnB,EAAMc,UAAU,aAA5B,SACKZ,MAONkB,QAAMC,KAAK5B,I,6GC3BX6B,UAvBf,WAAoB,IAAD,EAEW3B,mBAAS,MAFpB,mBAERO,EAFQ,KAEDC,EAFC,KAaf,OAVAC,qBACI,WACI3C,YAAS,GAAGuD,MAAK,SAAAV,GACbC,QAAQC,IAAIF,GACZH,EAASO,YAAKJ,EAAIvC,KAAMuC,EAAIK,QAAQ,uBAG5C,IAIA,gCACI,cAAC,IAAD,CAAWjD,GAAG,MACd,qBAAKkD,IAAKV,EAAOW,IAAI,SAFzB","file":"static/js/6.cd7a479f.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst imageApi = axios.create({\r\n    baseURL: process.env.REACT_APP_REST_IP || 'http://localhost:5000',\r\n    timeout: 5000\r\n})\r\n\r\nexport const apiImage = id => imageApi.get(`api/image/${id}`, {\r\n    responseType: 'arraybuffer'\r\n});\r\n\r\nexport const apiImageSize = id => imageApi.get(`api/imageSize/${id}`)","const b64toBlob = (b64Data, contentType = '', sliceSize = 512) => {\r\n    const byteCharacters = atob(b64Data);\r\n    const byteArrays = [];\r\n\r\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n        const slice = byteCharacters.slice(offset, offset + sliceSize);\r\n\r\n        const byteNumbers = new Array(slice.length);\r\n        for (let i = 0; i < slice.length; i++) {\r\n            byteNumbers[i] = slice.charCodeAt(i);\r\n        }\r\n\r\n        const byteArray = new Uint8Array(byteNumbers);\r\n        byteArrays.push(byteArray);\r\n    }\r\n    const blob = new Blob(byteArrays, { type: contentType });\r\n    return blob;\r\n}\r\n\r\nfunction blobURL(data, contentType) {\r\n    let base64 = Buffer.from(data, 'binary').toString('base64');\r\n    let blob = b64toBlob(base64, contentType);\r\n    return URL.createObjectURL(blob);\r\n}\r\n\r\nexport { blobURL };","import React, { useEffect, useState } from 'react'\r\nimport { apiImage, apiImageSize } from '../../Api/ImageApi';\r\nimport { blobURL as btob } from '../../Util/ImageApiHelper';\r\nimport './ImageCard.css';\r\n\r\nfunction ImageCard(props) {\r\n    const [shouldCreate, setShouldCreate] = useState(true)\r\n    const [size, setSize] = useState({ width: `${0}px`, height: `${0}px` });\r\n    const [image, setImage] = useState(null);\r\n    useEffect(\r\n        () => {\r\n            async function getSize() {\r\n                try {\r\n                    let res = await apiImageSize(props.id);\r\n                    setSize(res.data);\r\n                } catch (error) {\r\n                    console.log(error)\r\n                    throw error;\r\n                }\r\n            }\r\n\r\n            async function getImage() {\r\n                try {\r\n                    let res = await apiImage(props.id);\r\n                    let bimage = btob(res.data, res.headers[\"content-type\"]);\r\n                    setImage(\r\n                        <img src={bimage} alt=\"ImageCard\" className=\"image_card_image\"></img>\r\n                    );\r\n                } catch (error) {\r\n                    console.log(error)\r\n                }\r\n            }\r\n            getSize()\r\n                .then(_ => getImage(),\r\n                    _ => setShouldCreate(false))\r\n            return () => {\r\n                setShouldCreate(null);\r\n                setSize(null);\r\n                setImage(null);\r\n            }\r\n        },\r\n        [props.id]\r\n    )\r\n\r\n    return (\r\n        <>\r\n            {shouldCreate &&\r\n                <div style={size} className=\"image_card\">\r\n                    {image}\r\n                </div>\r\n            }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default React.memo(ImageCard);","import React, { useEffect, useState } from 'react'\r\nimport { apiImage } from '../../../Api/ImageApi';\r\nimport { blobURL as btob } from '../../../Util/ImageApiHelper';\r\nimport ImageCard from '../../../Projects/Project1/ImageCard';\r\n\r\nfunction ApiTest() {\r\n\r\n    const [image, setImage] = useState(null);\r\n    useEffect(\r\n        () => {\r\n            apiImage(1).then(res => {\r\n                console.log(res);\r\n                setImage(btob(res.data, res.headers[\"content-type\"]));\r\n            })\r\n        },\r\n        []\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            <ImageCard id=\"9\" />\r\n            <img src={image} alt='test'>\r\n            </img>\r\n            Testing\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ApiTest;"],"sourceRoot":""}